#!/bin/zsh

# set -e

echo "ğŸ¡ Making yourself at home..."

if [[ $(command -v brew) == "" ]]; then
  echo "ğŸº Installing Hombrew"
  sh -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
else
  echo "ğŸº Updating Homebrew"
  brew update
fi

echo "ğŸ“¦ Installing Homebrew Packages"
brew bundle --file "${HOME}/.dotfiles/brew/Brewfile"

# have "${HOME}/.dotfile" "#!/bin/zsh\n"

echo "Creating custom ~/.dotfile"
local $zshrc_injection='source "${HOME}/.dotfile"'
echo "----"
echo $injection
echo "----"

if [[ ! -f "${HOME}/.dotfile" ]]; then
  # touch "${HOME}/.dotfile"
  local $injection="\. \"\$\{HOME\}\/.dotfile\""
  echo "----"
  echo $injection
  echo "----"
  # echo "#!/bin/zsh\n\nverbose 'ğŸ¡ Home sweet home'" > "${HOME}/.dotfile"
else
  verbose "~/.dotfile already exists!"
fi

echo "Done ~ ğŸ¡ Welcome home!"
